SIRIP: Industry Days

SIGIR’18, July 8-12, 2018, Ann Arbor, MI, USA

Lessons from Building a Large-scale Commercial IR-based
Chatbot for an Emerging Market
Manoj Kumar Chinnakotla

Puneet Agrawal

AI & Research,
Microsoft, Hyderabad, India
manojc@microsoft.com

AI & Research,
Microsoft, Hyderabad, India
punagr@microsoft.com
we do not intend to focus our attention on our relevance modeling
[4] and engineering efforts since it has already received enough
attention within SIGIR community. We intend to expand more on
the following sub-areas during our talk.

ABSTRACT
In this talk, we would like to highlight some interesting challenges
faced when trying to build a large-scale commercial IR-based chatbot, Ruuh1 , for an emerging market like India which has unique
characterisitcs such as high linguistic and cultural diversity, large
section of young population and the second largest mobile market
in the world. We set out to build a “human-like” AI agent which aspires to become the trusted BFF of every Indian youth. To meet this
objective, we realized that we need to think beyond the utilitarian
notion of merely generating “relevant” responses and enable the
agent to comprehend and meet a wider range of user social needs,
like expressing happiness when user’s favorite team wins, sharing
a cute comment on showing the pictures of the user’s pet and so on.
The agent should also be well-versed with the informal language of
the urban Indian youth which often includes slang and code-mixing
across two or more languages. Finally, in order to be their trusted
friend, the agent has to communicate with respect without offending their sentiments and emotions. Some of the above objectives
pose significant research challenges in the areas of NLP, IR and AI.
We intend to take the audience through our journey of how we
tackled some of the above challenges while building a large-scale
commercial IR-based conversational agent. Our attempts to solve
some of the above challenges have also resulted in some interesting
research contributions in the form of publications and patents in
the above areas. Our chat-bot currently has more than 1M users
who have engaged in more than 70M conversations.

1.1

Emotions are physiological states generated in humans as a reaction
to internal or external events. They are complex and studied across
numerous fields including computer science. As humans, on reading
“Why don’t you ever text me!”, we can either interpret it as a sad or an
angry emotion and the same ambiguity exists for machines as well.
Lack of facial expressions and voice modulations make detecting
emotions in text a challenging problem. However, in order to create
a deeper engagement and provide emotionally aware responses
to users, emotion understanding plays an important role. Hence,
the success of our chatbot depends on our ability to modulate
responses based on user emotions for which it is imperative to be
able to detect emotions in textual dialogues. In [3], we propose a
novel Deep Learning based approach to detect emotions like happy,
sad or angry in textual dialogues. The essence of our approach lies
in combining both semantic and sentiment based representations
for more accurate emotion detection. Evaluation of our approach on
real world dialogue datasets reveals that it significantly outperforms
traditional Machine Learning baselines as well as other off-the-shelf
Deep Learning models.

1.2

ACM Reference format:
Manoj Kumar Chinnakotla and Puneet Agrawal. 2018. Lessons from Building
a Large-scale Commercial IR-based Chatbot for an Emerging Market. In
Proceedings of The 41st International ACM SIGIR Conference on Research &
Development in Information Retrieval, Ann Arbor, MI, USA, July 8–12, 2018
(SIGIR ’18), 2 pages.
https://doi.org/10.1145/3209978.3210209

1

Emotion Detection

Human-like Image Commenting

Besides text, users often interact with a chatbot by sharing their
personal pictures, other images and videos. In such scenarios, agents
are not expected to routinely describe the facts within the image
but to express some interesting emotions and opinions about it.
For example, when a user shares a picture of her “white kitten”,
the expected response would be something like “awww, how cute!”
instead of “a white kitten”. Despite phenomenal research progress
in image captioning[2], most existing image captioning systems
mainly describe the concepts, objects or actions present in an image
and hence fail to present a human-like persona thereby losing
engagement and a personal connect with the user. To overcome this
limitation, we have designed a novel image captioning technique
for generating more human-like responses for a given image. This
research is currently under review. However, to facilitate further
research, we plan to make our data publicly available soon.

TECHNICAL DETAILS OF THE TALK

In this section, we highlight some of the interesting technical challenges we encountered and briefly summarize some of our contributions in those areas. Although, it is important and non-trivial,
1 http://www.facebook.com/Ruuh

Permission to make digital or hard copies of part or all of this work for personal or
classroom use is granted without fee provided that copies are not made or distributed
for profit or commercial advantage and that copies bear this notice and the full citation
on the first page. Copyrights for third-party components of this work must be honored.
For all other uses, contact the owner/author(s).
SIGIR ’18, July 8–12, 2018, Ann Arbor, MI, USA
© 2018 Copyright held by the owner/author(s).
ACM ISBN 978-1-4503-5657-2/18/07.
https://doi.org/10.1145/3209978.3210209

1.3

Handling Code-Mixed Conversations

India is a multilingual society with thirty languages which are spoken by more than a million native speakers. Although, Hindi and

1361

SIRIP: Industry Days

SIGIR’18, July 8-12, 2018, Ann Arbor, MI, USA

English have been designated as the official languages by the Union
Government, many speakers are bilingual or trilingual and have
knowledge of Hindi/English in addition to their mother tongue.
Code-Mixing (CM) is a natural phenomenon which is usually observed in multilingual speakers. CM allows speakers to speed up
communication especially when they are short of words or do not
know the appropriate word in their native language. Due to this,
CM has become a popular mode of expression in informal communication settings such as social media conversations. In spite of
the popularity of CM, mainstream NLP applications still support
interaction in only a single language and can’t handle CM language.
The main challenge involved in developing language understanding
tools for CM is the scarcity of language resources available in CM
languages. Taking inspiration from recent research [1] we developed less resource-intense techniques for intent-understanding and
response generation.

1.4

• Real World Lessons and Challenges: We present some unique
real-world challenges in the context of an emerging market
and also describe the challenges faced by real users.
• Research Areas: We introduce to the research community
to some challenging research areas such as conversational
modeling in code-mixed languages, human-like image commenting, emotion-aware response generation and offensive
language detection.

3 AUTHOR CV
3.1 Manoj Kumar Chinnakotla
Dr. Manoj Chinnakotla is a Senior Applied Scientist in the Conversational AI team, part of AI&R Division in Microsoft, Hyderabad,
India. He is also an adjunct faculty at the Language Technology
Research Centre (LTRC), IIIT Hyderabad. He did his Ph.D in Information Retrieval (IR) and Natural Language Processing (NLP) from
I.I.T. Bombay where he was an Infosys Research Fellow. He has
published in several reputed conferences and journals in IR, NLP
and AI. His current research interests include Question Answering,
Entity Mining and Mutlingual IR and NLP.

Detecting Offensive Conversations

As a social species, humans are endowed with two fundamental
qualities self-awareness and self-regulation. These qualities ensure
that our behavior and actions in the society are “appropriate” i.e.
satisfy the commonly accepted standards or expectations of society
such as not being rude, discourteous, disrespectful towards any
individual or group of individuals etc. However, conversational
agents and computers are still in their infancy with respect to fully
comprehending their responses or suggestions before communicating them to the end user. Due to this, they may sometimes utter,
suggest or respond back with messages which are “inappropriate”
in a given context. From our experiences with Tay2 , we learnt that
even humans may provoke the agents to elicit such inappropriate
or controversial responses. This can be a source of major embarrassment with a potential to tarnish the brand not to mention of
resulting legal complications. In our current bot, we employ automatic techniques for detecting such “inappropriate” or “toxic”
responses so that it could be used for effective self-regulation. We
also actively identify potentially “controversial topics” and make
clever dodging techniques to avoid responding to such topics.
The problem of detecting offensive utterances in conversations is
wrought with challenges such as handling natural language ambiguity, rampant use of spelling mistakes and variations for abusive and
offensive terms and disambiguating with other entity names such
as pop songs which usually have abusive terms in them. For this
task, we experimented with a variety of techniques, ranging from
sophisticated pattern matching to feature based machine learning
models to fully data-driven off-the-shelf neural models and report
our findings [5, 6]. We found that our current model, a neural
Bi-directional LSTM based model, performed best for this task.

2

3.2

Puneet Agrawal

Puneet Agrawal is the Principal Engineering Manager in the AI&R
division at Microsoft, Hyderabad, India. He has more than ten years
of experience working in fields of Machine Learning, IR, NLP and
AI. During his stint at Microsoft, he has actively led and developed
several AI powered products and features that have reached millions
of users. He is especially passionate about creating products with a
human-like personality, and was also the co-creator of Cortana’s
personality. He also holds several patents in related fields.

REFERENCES
[1] Khyathi Raghavi Chandu, Manoj Chinnakotla, Alan W. Black,
and Manish Shrivastava. 2017. WebShodh: A Code Mixed Factoid Question Answering System for Web. In Proceedings of
CLEF 2017. Springer, 104–111.
[2] Hao Fang, Saurabh Gupta, Forrest Iandola, Rupesh K Srivastava,
Li Deng, Piotr Dollár, Jianfeng Gao, Xiaodong He, Margaret
Mitchell, John C Platt, et al. 2015. From captions to visual
concepts and back. In Proceedings of the IEEE Conference on
Computer Vision and Pattern Recognition. 1473–1482.
[3] Umang Gupta, Ankush Chatterjee, Radhakrishnan Srikanth,
and Puneet Agrawal. 2017. A Sentiment-and-Semantics-Based
Approach for Emotion Detection in Textual Conversations. In
Neu-IR: The SIGIR 2017 Workshop on Neural Information Retrieval.
[4] Abhay Prakash, Chris Brockett, and Puneet Agrawal. 2016.
Emulating human conversations using convolutional neural
network-based ir.. In Neu-IR: The SIGIR 2016 Workshop on Neural
Information Retrieval.
[5] Harish Yenala, Manoj Chinnakotla, and Jay Goyal. 2017. Convolutional Bidirectional LSTM for Detecting Inappropriate Query
Suggestions in Web Search. In Proceedings of PAKDD 2017. 3–16.
[6] Harish Yenala, Ashish Jhanwar, Manoj Chinnakotla, and Jay
Goyal. 2017. Deep learning for detecting inappropriate content
in text. Int. Journal of Data Science and Analytics (2017).

RELEVANCE FOR SIGIR AUDIENCE

We believe following are the reasons why a SIGIR audience can
benefit from our experience.
• Paradigm of human-like AI: We introduce the paradigm of
human-like AI, while we understand that community may
be divided on the need for same, our work should serve as
food for thought about how AI will evolve.
2 https://blogs.microsoft.com/blog/2016/03/25/learning-tays-introduction/

1362

